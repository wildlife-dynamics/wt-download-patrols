base:
  name: Base Test Case
  mock_io: true
  params:
    workflow_details:
      name: "Patrol Tracks Events Workflow"
      description: "Process and visualize patrol observations and events."
    er_client_name:
      data_source:
        name: "mep_dev"
    time_range:
      since: "2015-01-10T00:00:00"
      until: "2015-02-28T23:59:59"
      timezone:
        label: "Africa/Nairobi (UTC+03:00)"
        tzCode: "Africa/Nairobi"
        name: "(UTC+03:00) Nairobi"
        utc: "+03:00"
    er_patrol_and_events_params:
      patrol_types: ["ecoscope_patrol"]
      status: ["done"]
      event_types: []
      include_null_geometry: false
    groupers:
      groupers: []
    patrol_traj:
      trajectory_segment_filter:
        min_length_meters: 0.001
        max_length_meters: 10000.0
        max_time_secs: 3600.0
        min_time_secs: 1.0
        max_speed_kmhr: 120.0
        min_speed_kmhr: 0.01
    set_patrol_traj_color_column:
      var: "patrol_subject"
    filter_patrol_events:
      bounding_box:
        min_x: -180.0
        max_x: 180.0
        min_y: -90.0
        max_y: 90.0
      filter_point_coords:
        - {x: 180.0, y: 90.0}
        - {x: 0.0, y: 0.0}
        - {x: 1.0, y: 1.0}
    sql_query_traj:
      query: ''
      columns: []
    persist_patrol_traj:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_trajectories"
    persist_patrol_events:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_events"
    set_skip_map:
      var: false
    base_map_defs:
      base_maps:
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"
          opacity: 1.0
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
          opacity: 0.5
          max_zoom: 17
          min_zoom: null

month-grouper:
  name: Monthly Grouper
  mock_io: true
  params:
    workflow_details:
      name: "Patrol Tracks Events Workflow"
      description: "Process and visualize patrol observations and events."

    er_client_name:
      data_source:
        name: "mep_dev"

    er_patrol_and_events_params:
      patrol_types: ["ecoscope_patrol"]
      status: ["done"]
      event_types: []
      include_null_geometry: false

    time_range:
      since: "2015-01-10T00:00:00"
      until: "2015-02-28T23:59:59"
      timezone:
        label: "Africa/Nairobi (UTC+03:00)"
        tzCode: "Africa/Nairobi"
        name: "(UTC+03:00) Nairobi"
        utc: "+03:00"

    groupers:
      groupers:
        - "%B"

    patrol_traj:
      trajectory_segment_filter:
        min_length_meters: 0.001
        max_length_meters: 10000.0
        max_time_secs: 3600.0
        min_time_secs: 1.0
        max_speed_kmhr: 120.0
        min_speed_kmhr: 0.01

    set_patrol_traj_color_column:
      var: "patrol_subject"

    filter_patrol_events:
      bounding_box:
        min_x: -180.0
        max_x: 180.0
        min_y: -90.0
        max_y: 90.0
      filter_point_coords:
        - {x: 180.0, y: 90.0}
        - {x: 0.0, y: 0.0}
        - {x: 1.0, y: 1.0}

    persist_patrol_traj:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_trajectories"

    persist_patrol_events:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_events"

    set_skip_map:
      var: false

    base_map_defs:
      base_maps:
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"
          opacity: 0.1
        - url: "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}"
          opacity: 0.8
          max_zoom: 17

with-event-types:
  name: Test Case with specific event types
  mock_io: false
  params:
    workflow_details:
      name: "Patrol Tracks Events Workflow"
      description: "Process and visualize patrol observations and events."
    er_client_name:
      data_source:
        name: "mep_dev"
    time_range:
      since: "2015-01-01T00:00:00Z"
      until: "2015-01-07T23:59:59Z"
      timezone:
        label: "Africa/Nairobi (UTC+03:00)"
        tzCode: "Africa/Nairobi"
        name: "(UTC+03:00) Nairobi"
        utc: "+03:00"
    er_patrol_and_events_params:
      patrol_types: ["ecoscope_patrol"]
      status: ["done"]
      event_types: ["arrest_rep", "snare_rep", "poacher_camp_rep"]
      include_null_geometry: false
    patrol_traj:
      trajectory_segment_filter:
        min_length_meters: 0.001
        max_length_meters: 10000.0
        max_time_secs: 3600.0
        min_time_secs: 1.0
        max_speed_kmhr: 120.0
        min_speed_kmhr: 0.01
    set_patrol_traj_color_column:
      var: "patrol_type"
    filter_patrol_events:
      filter_point_coords:
        - {x: 180.0, y: 90.0}
        - {x: 0.0, y: 0.0}
        - {x: 1.0, y: 1.0}
    persist_patrol_traj:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_trajectories_with_events"
    persist_patrol_events:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_events_typed"
    set_skip_map:
      var: false
    base_map_defs:
      base_maps:
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"
          opacity: 1.0
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
          opacity: 0.5
          max_zoom: 17
          min_zoom: null

color-by-patrol-type:
  name: Test Case coloring by patrol type
  mock_io: true
  params:
    workflow_details:
      name: "Patrol Tracks Events Workflow"
      description: "Process and visualize patrol observations and events."
    er_client_name:
      data_source:
        name: "mep_dev"
    time_range:
      since: "2026-01-01T00:00:00Z"
      until: "2026-01-07T23:59:59Z"
      timezone:
        label: "Africa/Nairobi (UTC+03:00)"
        tzCode: "Africa/Nairobi"
        name: "(UTC+03:00) Nairobi"
        utc: "+03:00"
    er_patrol_and_events_params:
      patrol_types: ["ecoscope_patrol"]
      status: ["done"]
      event_types: []
      include_null_geometry: false
    patrol_traj:
      trajectory_segment_filter:
        min_length_meters: 0.001
        max_length_meters: 10000.0
        max_time_secs: 3600.0
        min_time_secs: 1.0
        max_speed_kmhr: 120.0
        min_speed_kmhr: 0.01
    set_patrol_traj_color_column:
      var: "patrol_type"
    filter_patrol_events:
      filter_point_coords:
        - {x: 180.0, y: 90.0}
        - {x: 0.0, y: 0.0}
        - {x: 1.0, y: 1.0}
    persist_patrol_traj:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_trajectories_by_type"
    persist_patrol_events:
      filetypes: ["geoparquet", "csv"]
    set_skip_map:
      var: false
    base_map_defs:
      base_maps:
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"
          opacity: 1.0
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
          opacity: 0.5
          max_zoom: 17
          min_zoom: null

skip-maps:
  name: Test Skipping Map Generation
  mock_io: true
  params:
    workflow_details:
      name: "Patrol Tracks Events Workflow"
      description: "Process and visualize patrol observations and events."
    er_client_name:
      data_source:
        name: "mep_dev"
    time_range:
      since: "2015-01-01T00:00:00"
      until: "2015-12-31T23:59:59"
      timezone:
        label: "Africa/Nairobi (UTC+03:00)"
        tzCode: "Africa/Nairobi"
        name: "(UTC+03:00) Nairobi"
        utc: "+03:00"
    er_patrol_and_events_params:
      patrol_types: ["ecoscope_patrol"]
      status: ["done"]
      event_types: []
      include_null_geometry: false
    groupers:
      groupers: []
    patrol_traj:
      trajectory_segment_filter:
        min_length_meters: 0.001
        max_length_meters: 10000.0
        max_time_secs: 3600.0
        min_time_secs: 1.0
        max_speed_kmhr: 120.0
        min_speed_kmhr: 0.01
    set_patrol_traj_color_column:
      var: "patrol_subject"
    filter_patrol_events:
      filter_point_coords:
        - {x: 180.0, y: 90.0}
        - {x: 0.0, y: 0.0}
        - {x: 1.0, y: 1.0}
    persist_patrol_traj:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_trajectories"
    persist_patrol_events:
      filetypes: ["geoparquet", "csv"]
      filename_prefix: "patrol_events"
    base_map_defs:
      base_maps:
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"
          opacity: 1.0
        - url: "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"
          opacity: 0.5
          max_zoom: 17
          min_zoom: null
    set_skip_map:
      var: true
